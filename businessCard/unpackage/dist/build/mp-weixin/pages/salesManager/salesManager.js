(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/salesManager/salesManager"],{"423e":function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i}));var i={uPopup:function(){return n.e("uview-ui/components/u-popup/u-popup").then(n.bind(null,"90d7"))}},a=function(){var t=this,e=t.$createElement,n=(t._self._c,t.__get_style([t.ctxWStr,t.ctxHStr]));t.$mp.data=Object.assign({},{$root:{s0:n}})},o=[]},"52dc":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=o(n("a34a")),a=n("0def");function o(t){return t&&t.__esModule?t:{default:t}}function s(t,e,n,i,a,o,s){try{var r=t[o](s),c=r.value}catch(u){return void n(u)}r.done?e(c):Promise.resolve(c).then(i,a)}function r(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var o=t.apply(e,n);function r(t){s(o,i,a,r,c,"next",t)}function c(t){s(o,i,a,r,c,"throw",t)}r(void 0)}))}}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var u=function(){n.e("components/SalesManagerCard").then(function(){return resolve(n("95a3"))}.bind(null,n)).catch(n.oe)},l=function(){n.e("components/PersonalIcon").then(function(){return resolve(n("b979"))}.bind(null,n)).catch(n.oe)},p=function(){n.e("components/FixedChat").then(function(){return resolve(n("04ce"))}.bind(null,n)).catch(n.oe)},m={data:function(){var t;return t={userType:-1,avatar:["https://ossweb-img.qq.com/images/lol/web201310/skin/big10001.jpg","https://ossweb-img.qq.com/images/lol/web201310/skin/big81005.jpg","https://ossweb-img.qq.com/images/lol/web201310/skin/big25002.jpg","https://ossweb-img.qq.com/images/lol/web201310/skin/big91012.jpg"],browseCount:123,appreciateCount:53,userIsAppreciate:!1,salesManagerInfo:{name:"王珞丹",avatar:"https://ossweb-img.qq.com/images/lol/web201310/skin/big84000.jpg",position:"",wxId:"wx_id1245343543",phone:"13970853937",company:"江西省家院里科技江西省家",brief:"",mail:"123123222@gmail.com"},altas:[{id:0,type:"image",url:"https://ossweb-img.qq.com/images/lol/web201310/skin/big84000.jpg"},{id:1,type:"image",url:"https://ossweb-img.qq.com/images/lol/web201310/skin/big37006.jpg"},{id:2,type:"image",url:"https://ossweb-img.qq.com/images/lol/web201310/skin/big39000.jpg"},{id:3,type:"image",url:"https://ossweb-img.qq.com/images/lol/web201310/skin/big10001.jpg"},{id:4,type:"image",url:"https://ossweb-img.qq.com/images/lol/web201310/skin/big25011.jpg"},{id:5,type:"image",url:"https://ossweb-img.qq.com/images/lol/web201310/skin/big21016.jpg"},{id:6,type:"image",url:"https://ossweb-img.qq.com/images/lol/web201310/skin/big99008.jpg"}],audioIsPlay:!1,audioObj:"",audioSrc:"https://vkceyugu.cdn.bspapp.com/VKCEYUGU-hello-uniapp/2cc220e0-c27a-11ea-9dfb-6da8e309e0d8.mp3",allTime:0,audioCurrentTime:0,type:0,bottomPoup:!1,myCanvasId:"myCanvas"},c(t,"avatar",""),c(t,"tempFilePath",""),c(t,"smCtxW",0),c(t,"smCtxH",0),c(t,"ctx",null),c(t,"pixeRatio",0),c(t,"getalbum",!1),c(t,"initCanvasRes",!1),c(t,"paintArr",[{type:"img",content:"https://cdn.jsdelivr.net/gh/XF3309267/imgs/img/81f6b5a961a5cd27d64f05192440b47.jpg",xPosition:0,yPosition:0},{type:"img",content:"https://cdn.jsdelivr.net/gh/XF3309267/imgs/img/phone.png",xPosition:0,yPosition:0},{type:"img",content:"https://cdn.jsdelivr.net/gh/XF3309267/imgs/img/home.png",xPosition:0,yPosition:0},{type:"img",content:"https://cdn.jsdelivr.net/gh/XF3309267/imgs/img/email.png",xPosition:0,yPosition:0},{type:"img",content:"https://cdn.jsdelivr.net/gh/XF3309267/imgs/img/email.png",xPosition:0,yPosition:0},{type:"img",content:"https://cdn.jsdelivr.net/gh/XF3309267/imgs/img/jigou.png",xPosition:0,yPosition:0}]),c(t,"newPainArr",[]),t},watch:{},computed:{showAudioTime:function(){return this.audioIsPlay?0===this.allTime?"0s":parseInt(this.allTime-this.audioCurrentTime)+"s":parseInt(this.allTime)+"s"},ctxWStr:function(){if(this.smCtxW)return{width:this.smCtxW*this.pixeRatio+"px"}},ctxHStr:function(){if(this.smCtxH)return{height:this.smCtxH*this.pixeRatio+"px"}}},onShareAppMessage:function(){return{title:"您好，我是"+this.salesManagerInfo.name+",一键保存，了解更多...",success:function(t){console.log("分享 success"),console.log(t)},fail:function(t){console.log("分享 fail"),console.log(t)}}},onShow:function(){-1===this.userType&&this.initUserType(),(0,a.getImgInfo)("@/static/img/salecPersonImg/home.png")},onLoad:function(){t.showToast({title:"您好，我是您的销售经理。有什么问题可以随时咨询我哦！",icon:"none"})},created:function(){var t=this;return r(i.default.mark((function e(){var n;return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.initCanvas(t.myCanvasId);case 2:n=e.sent,t.initCanvasRes=n;case 4:case"end":return e.stop()}}),e)})))()},mounted:function(){},methods:{initUserType:function(){this.userType=getApp().globalData.userType},playAudio:function(){var e=this;if(this.audioIsPlay)return console.log("音乐播放中"),this.startTime=0,this.audioIsPlay=!1,this.audioObj.pause(),void this.audioObj.destroy();var n=t.createInnerAudioContext();n.src=this.audioSrc,n.onCanplay((function(){e.audioCurrentTime=n.currentTime,n.play(),e.audioIsPlay=!0,n.onPlay((function(){e.audioCurrentTime=n.currentTime,e.audioObj=n,n.onTimeUpdate((function(){e.allTime=n.duration,e.audioCurrentTime=n.currentTime;var t=parseInt(e.allTime-e.audioCurrentTime);t||(n.destroy(),e.audioIsPlay=!1)}))}))})),n.onError((function(){t.showToast({title:"音频播放错误",icon:"none"}),e.audioIsPlay=!1,n.destroy()}))},appreciate:function(){this.userIsAppreciate?console.log("用户已经点赞"):(this.appreciateCount++,this.userIsAppreciate=!0)},phoneCall:function(){t.makePhoneCall({phoneNumber:this.salesManagerInfo.phone,success:function(t){console.log("makePhoneCall success"),console.log(t)},fail:function(t){console.log("makePhoneCall fail"),console.log(t)}})},copyWxId:function(){t.setClipboardData({data:this.salesManagerInfo.wxId,success:function(){t.showToast({title:"成功复制微信号"})},fail:function(){console.log("复制失败")}})},showBottomPoup:function(){this.bottomPoup=!0},addEleToList:function(t,e,n,i){},createPostCard:function(){this.initCanvasRes&&this.canvansTodo(this.ctx,this.myCanvasId,this.pixeRatio,this.paintArr,this.smCtxW*this.pixeRatio,this.smCtxH*this.pixeRatio)},initCanvas:function(e){var n=this;return new Promise((function(i,a){n.ctx=t.createCanvasContext(e),t.getSystemInfo({success:function(t){console.log(t),n.smCtxH=.5*t.screenHeight,n.smCtxW=.8*n.smCtxH,t.screenWidth<n.smCtxW&&(n.smCtxW=t.screenWidth),n.pixeRatio=t.pixelRatio,i(!0)}})}))},paintText:function(t,e,n,i,a,o,s){t.setFillStyle(i),t.setFontSize(a*e),t.fillText(n,o*e,s*e)},paintLogText:function(t,e,n,i,a,o,s,r){r||(r=8),s||(s=17);var c=[];c.length=Math.ceil(u/r);var u=e.length;if(u>r)for(var l=0;l<c.length;l++){var p=e.subString(r*l,r*(l+1));c[l]=p,this.paintText(t,p,n,i,a,o+addStep*l*this.pixeRatio)}else this.paintText(t,e,n,i,a,o)},paintBgColor:function(t,e,n,i){t.rect(0,0,n,i),t.fillStyle=e,t.fill()},fillRoundRect:function(t,e,n,i,a,o,s){if(2*o>i||2*o>a)return!1;t.save(),t.translate(e,n),this.drawRoundRectPath(t,i,a,o),t.fillStyle=s||"#000",t.fill(),t.restore()},drawRoundRectPath:function(t,e,n,i){t.beginPath(0),t.arc(e-i,n-i,i,0,Math.PI/2),t.lineTo(i,n),t.arc(i,n-i,i,Math.PI/2,Math.PI),t.lineTo(0,i),t.arc(i,i,i,Math.PI,3*Math.PI/2),t.lineTo(e-i,0),t.arc(e-i,i,i,3*Math.PI/2,2*Math.PI),t.lineTo(e,n-i),t.closePath()},arrangPaintList:function(t){return r(i.default.mark((function e(){var n,o;return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=0;case 1:if(!(n<t.length)){e.next=15;break}return e.next=4,(0,a.getImgInfo)(t[n].content);case 4:if(o=e.sent,t[n].content=o.path,t[n].width=o.width,t[n].height=o.height,n!==t.length-1){e.next=12;break}return console.log("finally"),console.log(t),e.abrupt("return",t);case 12:n++,e.next=1;break;case 15:case"end":return e.stop()}}),e)})))()},canvasDrawImage:function(t,e,n,i,a,o,s){i=parseInt(i*e),a=parseInt(a*e),o=parseInt(o*e),s=parseInt(s*e);t.drawImage(n.content,i,a,o,s)},canvansTodo:function(e,n,o,s,c,u){var l=this;return r(i.default.mark((function p(){var m,g,f,h,d,b,x,v,w,T,y,C;return i.default.wrap((function(p){while(1)switch(p.prev=p.next){case 0:return l.paintBgColor(e,"#FFFFFF",c,u),t.showLoading({title:"名片海报生成中",mask:!0}),p.next=4,l.arrangPaintList(s);case 4:m=p.sent,g=l.smCtxW/10,f=l.smCtxH/10,h=l.smCtxW/7,d=l.smCtxH/24,b=10,10,x=l.smCtxW/750*20,v=15,w=15,T=m[0].height/m[0].width,y=l.smCtxW/10*3,C=T*y,l.fillRoundRect(e,(g-10)*o,(f-10)*o,(l.smCtxW/10*8+20)*o,(C+20)*o,10*o,"#efefef"),l.canvasDrawImage(e,o,m[0],g,f-.5,y,C),l.paintText(e,o,l.salesManagerInfo.name,"#000",x,g+y+b,f+d),l.paintText(e,o,"销售经理","#000",x,g+y+b,f+2*d),l.canvasDrawImage(e,o,m[4],g+y+b+10*x,f+d-w,v,v),l.paintText(e,o,"电话：","#000",x,g+y+b,f+3*d),l.paintText(e,o,l.salesManagerInfo.phone,"#000",x,g+y+b+3*x,f+3*d),l.paintText(e,o,"公司：","#000",x,g+y+b,f+4*d),l.paintText(e,o,l.salesManagerInfo.company,"#000",x,g+y+b+3*x,f+4*d),l.paintText(e,o,"邮箱：","#000",x,g+y+b,f+5*d),l.paintText(e,o,l.salesManagerInfo.mail,"#000",x,g+y+b+3*x,f+5*d),l.paintText(e,o,"您好","#000",1.2*x,g,f+h+C),l.paintText(e,o,"我是"+l.salesManagerInfo.company+"的销售经理"+l.salesManagerInfo.name,"#000",1.2*x,g,f+1.5*h+C),l.paintText(e,o,"这是我的名片，请保存","#000",1.2*x,g,f+2*h+C),l.paintText(e,o,"谢谢！","#000",1.2*x,g,f+2.5*h+C),l.paintText(e,o,"长按识别二维码收下名片","#000",x,g,l.smCtxH-60),l.canvasDrawImage(e,o,m[5],l.smCtxW-8*v,l.smCtxH-60-2.5*v,5*v,5*v),e.draw(),setTimeout(r(i.default.mark((function e(){var o;return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.hideLoading(),e.next=3,l.canvansToFile(n,c,u);case 3:o=e.sent,l.saveToAlbum(o),(0,a.previewImg)(o),console.log(o);case 7:case"end":return e.stop()}}),e)}))),1e3);case 36:case"end":return p.stop()}}),p)})))()},saveToAlbum:function(e){t.saveImageToPhotosAlbum({filePath:e,success:function(e){t.showToast({title:"存入相册成功"})},fail:function(e){t.showToast({title:"存入相册失败",icon:"none"})}})},canvansToFile:function(e,n,i){return new Promise((function(a,o){t.canvasToTempFilePath({x:0,y:0,destWidth:n,destHeight:i,canvasId:e,success:function(t){a(t.tempFilePath)},fail:function(t){a(t.tempFilePath)}})}))}},components:{SalesManagerCard:u,PersonalIcon:l,FixedChat:p}};e.default=m}).call(this,n("543d")["default"])},"75ec":function(t,e,n){"use strict";(function(t){n("92eb");i(n("66fd"));var e=i(n("90b7"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},"90b7":function(t,e,n){"use strict";n.r(e);var i=n("423e"),a=n("f7f1");for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);n("9b28");var s,r=n("f0c5"),c=Object(r["a"])(a["default"],i["b"],i["c"],!1,null,"3d4629b0",null,!1,i["a"],s);e["default"]=c.exports},"9b28":function(t,e,n){"use strict";var i=n("b8c5"),a=n.n(i);a.a},b8c5:function(t,e,n){},f7f1:function(t,e,n){"use strict";n.r(e);var i=n("52dc"),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a}},[["75ec","common/runtime","common/vendor"]]]);